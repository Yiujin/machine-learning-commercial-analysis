<<팀2>>

ㅁ팀2
숫자형 변수 스케일링
변수정의서 : 한글명, 영문명, 변수타입(숫자형, 명목형), 단위, 변수 중요도, 
	변수 변환(나이 -> 연령대 연속적인 숫자를 구간화 필요할수도)
변환-> 형변환(나이 -> 구간), 단위변환(금액, 나이 다른단위 스케일레스)
숫자형 스케일링 방법 : 민 맥스 스케일링 ,제트 스코어 (파이썬 스케일링)
변수 중요도 선별 : 피처 셀렉션-> 회귀의 베타 계수값 사용 
	또는 디시젼 트리 importance 값
평균값, 최대값, 최소값, 중앙값, 최빈값 모두 봐야함. 
항상 분석 목적 생각
분석 모형정의서, 변수정의서, EDA 결과서(가설에대한 검증), 
	모형 설계서(알고리즘, 파라미터 들어가야), 학습 결과(시각화 or 통계량)
9월 데이터 정리해서 테스트데이터로


피드벡 팀별로만 나눠적고 

<변수 정의서>
한/영명, 타입, 변수중요도 
변수 스케일링 단위변환 형변환(숫자->구간)

처음에는 그냥 막 돌렸어도 단위를 바꿔서 스케일링을 해서 바꿔라
금액기준으로만 나누면 금액이 너무커서 단위 이상할수 있음

스케일링을 하는거에는 기법 3개
민맥스
제트스코어
파이썬에도 스케일링 함수 많음 -> 파이썬 스케일링으로 검색해봐라

변수 그룹핑해서 설명력을 높일 수 있음
cmcode -> 상권을 나누는데 뭘 기준으로 나누고싶어? 매출?? 연령대? 
다 섞어버리면 설명 불가 

//3개정도로 나눠봤는데 활성도 성장성 안정도 의미를 잘 못찾았어염 
다른3개는 활성도 총유동인구 유사업종 수
->어느연령대가 많이 가는 상권이 나올거라고 예상해서
돌려봤는데 유동인구 데ㅣ터 헷갈림 비정상적으로 높아
- > 군집이 하나가 따로 나옴

//그럴 경우는 그 하나와 나머지로 분류해서 따로 클러스터링 해라
큰놈이 한덩어린데 이놈들이 뭐냐하면 그거를 다시 클러스터링
쪼개지지 않으면 그건 하나의 클러스터
예를 들면 마트.... 큰마트 vs 동네슈퍼 -> 클러스터를 나누면 대기업군과 그 외
대기업 매출군을 나눴더니 3가지 작은건 5가지정도로 나눴다 이게 더 설명력있음
굳이 알고리즘을 설명하지 않아도 내가 설명하려는 의도에 맞게 클러스터링해야함
그 단위도 내가 원하는것과 클러스터링 했을때 단위가 같아서 설명가능해야함

//저희도 돌려봤는데 데이터 몰려잇음

//보통 비지도 학습하면 분석모형의 목적 정함 
1. 매출액 기준 상권유형 / 2. 연령대별 상권 유형
다음은 변수 정의-매출액 + 부가적인것  또는 매출액을 쪼개서 주단위 매출
연령대별은 당연히 연령들어가 
이걸 가지고 기초분석(eda)함  -> 목적은 변수의 중요도를 보고 변수선택을 ㅎㅏㅁ
파생변수를 만들수 도 있고 가설검증을 할수도 잇ㅇㅁ(이지역에 20대 많을것 같아)
이걸 시각화 할수 도있도 
그다음 모형을 보는데 군집자체가 시각화할수있는 알고리즘
 군집 나누면 분석결과 나옴 - 연령대별로 나눈 표가 될수도 있고,,
연령 X 성별 크로스로 볼수도 있고 -> 20대 남/여 변수를 만드는게 좋겠둔
다시 eda돌려보고 또 변수 확인 해보고...
이 과정에서 변수정의서 나오고 , 전체를 묶으면 모형정의서 
eda하고 나온게 eda결과서 
시각화결과, 클러스팅 결과 등 나올수 있음
군집별 평균같은 통계량 등이 있어야함 

모형정의서에 비지도 학습의 목적이 없잖아 클러스터를 하는 목적 예를들면 
매출액기준/연령대 기준 상권 분석 해보겠다 같은 거 들어가야 함
뭘로 나누냐에 따라서 어떤 변수를 써야할지가 결정되기 때문에 목적은 필수

그러면 변수선별기법(중요도(x가 y에 미치는 영향) 평가)중 하나가 '피쳐 셀렉션' 
매출액기준으로 나누고싶으면 매출액을 y로 놓고 이걸 결정하는 다른변수를
넣어줘봐 ->  회기식을 만들면 0.5x1 + 10x2 + ... -> x2가 젤중요
sol1: 결정트리나 랜덤 포세스트는 임포턴스도 나옴 -> y변수와 비슷한 변수 뽑아야지
sol2: 회귀 넣어보고 베타 변수값 젤 높은거가 젤 중요한 변수잖아 
이렇게 해서 변수 중요도 정리 해라

쉽게 얘기하면 회귀의 계수값은 y = b1x1 + b2x2 + ... b값 높을수록 중요
결정트리는 트리 맨위에 있는 변수가 젤 중요

클로스터링 돌린 결과 내놔

//첨에 연령대별/성별/ 유동인구 를 기준으로 해서 나눈거를 각자 클러스커 아이디
주고 돌려~! 3개가 안정성, 평균 영업개월수 , blabla , 이렇게해서시각화로 확임

// 저것도 3000k 래..

//그건 육안으로 확인하기 위해서 ..

// 그니까 클러스터링에서는 클러스터를 나누면 집단내는 동질, 집단간은 이질
이런변수들이 있어야함 없으면 뭉쳐있고 안나눠짐
저거는 차이있는뎅?

// 몇개 돌렸을때 차이 나는게 몇개 나옴

// 저거만 보면 3개로 나눠지니꺼 그걸 뭐라고 설명할지를 통계량 보고 해라
중앙값 최빈값 같은 써머리 보고 해라
그걸 하면서 다른편에서는 분석 목적을 조정해가면서 바꿔라
그리고 저것들을 군집분석을 했으면 알고리즘 별 비교를 할 수 있개 해라

똑같은 것도 집어 넣으면 알고리즘 kmeans ,,뭐,뭐 에 따라서 
어떻게 나눠지는지 표로 나옴 -> 알고리즘과 파라미터, 변수 뭐줄지 결정
그리드와 랜덤/ 그리드 : k(5, 10, 30)를 나눠봐 
랜덤 : k = 10 해보고 안좋으면 100 ...

비지도학습은 이게 오픈되어있으니까 잘 잡아라 모형설계할 때 잘 정해라
나 그때 논문 쓴거 상받음 ㅎㅎ 이거봐랑~~ 상금도 받았다 ㅎㅎ ^ _______ ^ 히히
이렇게 하란 마리야~~~~
변수, 알고리즘 차원에서 내가 실험하고자 하는 구간을 선정할 수 있어야 함

분석 모형 정의서, 변수 정의서, eda결과서, 모형 설계서. 학습결과(시각화, 통계)
변수 중요도, 파생변수 생성, 가설검증 그런것들이 eda 결과서에
모형설계서에는 알고리즘, 파라미터

학습데이터 정의서는? 기본적으로 학습데이터 몇건이다는 있어야됨

// 18년 9월거로 테스트ok ? ㅇㅋ

업종코드 안넣어 ? - 넣지않거나 하나를 고르거나 해라
만약에 넣으면 업종별로 이 동네는 한식이 뜨는 동네 이렇게 할려면넣어
------------------------------------------------------------------------------
<<팀1>>

저희가 쓴 x변수에 대해 대충 적어놈

// 소득구간과 월평균 소득은 둘중하나 선탯해라 ㅇㅋ 
연령대별 매출액과 연령대별 상주인구도 비슷하지 않냐 같이 움직이면 하나만 선택해라
날짜는 다른월이 없으니까 빼고 

//상권코드는 더미로 했어여

//  y변수뭐여 연령대별 매출
아까 얘기했던 변수 정의서 형태로 적어 그룹으로도 나누고 단위도 넣어 스케일링도 해
변수정의서는 비지도와 똑같

모형정의서 이쌴? 그걸 가지고 지난번에 중간보고서 썻을때처럼 계속 보완해라
지난번에 회의록만 써서 쓰지말고 계속 이어 나가라 지금부터 정리해
목차는 칠판에 쓴 순서대로 1. 분석 목적 .2.변수정의 .3 eda결과 4.분석
이게 분석결과가 되는 것이여 하나의 파일에 정리해라

// 학습데이터는 상권별로 20퍼 뺌

//계층별로 뺀거여? ㅇㅇ...맞네
돌려봤더니 ?

// x변수 완전히 해놓고 한게 아니라 그냥 돌려서 오차 커염

//지표뭐냐 rmse? 
아니면 선형회귀 안맞으면 분류 모형으로바꿔 y변수 구간화 시켜
목적에 따라 달라지는데 분석목적 자체가 매출액 얼마일까? 하면 숫자로 하고
매출액이 구간별로 다르고 그 구간만 알려주면 되면 구간으로 바꿔라

에러를 제곱해서 평균 루트한게 rmse 단위가 백만원이면 양호^^

일단 ㅇㅋ 

// y변수는 매출액으로 할건지 하면 원단위? 백만원 단위? 단위 정하고
이거는 회귀 , rmse, mse, mape(몇 %틀렸냐) 로 오류

아니면 매출액을 구간을 나눠서 1~5 특/ 상/ 중/ 하 이걸 나누는건 매출액의 range
를 봐서 4분위로 나눌수도 있고 분포로 보ㅏ서 25%로 나눌수 있다 이거는
y를 뭐로 볼지에 따라 달라짐 예를 들면  상위 10% 를 보여줄거다~~
min.max로 나눌래, 분포로 나눌래 에 따라 구간 다르게 나눈다
그렇게 하면 명목형 , 분류 -> accuracy로 오류 예측과 맞은거/틀린거 v합/all

y를 뭘로 주느냐에 따라 회귀/ 분류 / 평가지표 달라짐

숫자를 분류로 가야되느냐의 중요한 기준은 실제 일이 달라지면
상권을 소개지켜주는 입장에서 저 금액에 따라 수수료가 달라진다던지
서비스 받는 사람에게 금액이 달라진다던지
직원퇴사 예측 -> 얘가 몇%로 퇴사할까가 중요한게 아니라
얘가 면담을 해야될앤지 75%면 면담, 50%면 모니터링, 그 이하는 정상
그거에 따라 업무 프로세스 달라지니까 그거에 맞게 구간 다르게 해야함

회귀 돌릴려면 선형관계가 있어야함 너네 선향관계 확인했냐? 놀았넹...ㅎ

통계학에서는 뭐도 보고 뭐도 본후에 mse보는거여

//상관관계에서 연령대별로 나눠서 돌리니까 0.03....

//지금 연령대별로 나눌거니? 
왜 그러니...? 그건 별론뎅.... 
그것보다는 업종별로 나눠봐 똑같은 인구수가 있어도 주택가면 미용실, 분식집
아니면 회사 많으면 밥집 잘돼 , 
그러면 이지역에서 뭘 냈을때 얼마나 잘되냐를 알 수 있잖아 

지역으로 나누면 서울시내, 의정부 ..
모형의 세분도 단위를 정해라
변수를 업종/지역 별로 나누어라 모형을 업종/지역별로 여러개 써야할수도 있어 
토탈 모형도 나오고 
유흥/ 사치/ 생필품 이런식으로 업종 나눠봐 -> 술과 밥집은 다르다
술집은 20대 이하 또는 성별을 봐야 의미있음 -> 변수 자체가 달라짐

업종 - 유흥 으로 나누면 연령대별 인구수를 중려서 줄수도 잇음
지역별이면 인구수가 매출액에 미치는 영향이 다르니까 넣고뺄게 달라짐

분석 레벨 정해라 -> 상권예측은 쪼개면 유리하다 업종별로 쪼게면 더유리하다
학습데이터도 달라지고

인구수에 따른 매출액의 변화는 업종마다 완전 다르니까 그걸 전체 모형으로 보면 X
모형마다 각 업종에 대한 데이터만 학습하면 오차가 적어짐 

그럼 그걸 어떤 단위로 나눌건지가 중요,,,패턴을 보고 업종별로 나눴구나를 알아야함

실험을 해봐 업종별 3개 돌리고 지역별 3개 돌리고 그때 각각의 정확도를 비교하고
젤 높은놈 선택 / 
그리드로 나눠라 행 :  분류, 회귀 . 열: 업종, 지역

//업종을 3가지로 나누는 기준? 

//내가 데이터를 보고 생필품과 관련된 업종 그룹핑
업종 코드를보고,,, 나눈 각 데이터만 학습 -> 라벨링 시켜서 나눠라

이게 아니라면 피쳐셀렉션하고 중요도 평가하고 
업종앞에 붙은 베타계수보고 의미있는 업종 뽑을 수 있음

아까 산출물 다 만들어라 그게 분석의 프로세스야 

분석정의서 모형정의서 물어봐라 모르겠으면 캡쳐해서 보내드림

오늘 회의록 작성
오늘 우리가 설명한거, 피드백한거 (팀으로 나눠) 
다음달 산출물 목록 (동일)

-----------------------------------------------------------------------------
공모전 말고 논문이나 써라 이 애송이들아^^ 
한거 뭣도 없으면서 히히!!!

논문은 방법론이 새로운 접근법이라던가 클러스터한게 새로운 의미가 있다거나

아니면 지금 한거 분석결과서만 보고서 형태로 잘만 해놔도 ...
수행결과서를 스텝별로 정확히 찍어서 그거를 레포트로 해서 지원할때 넣어라

변수정의서 메모장에 깔짝깔짝 하지말고 히히^^!!!

 